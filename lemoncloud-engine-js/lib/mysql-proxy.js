"use strict";module.exports=function(t,n){n=n||"MS";var r=t.U;if(!r)throw new Error("$U is required!");var u=r.NS(n,"blue"),e=(t.log,t.inf,t.err,{do_get_last_id:function(r){return d().do_get(r,"0","last-id").then(function(r){return r.result})},do_get_next_id:function(r){return d().do_get(r,"0","next-id").then(function(r){return r.result})},do_create_id_seq:function(r,e){var t=e?{next:e}:null;return d().do_get(r,"0","create-id",t).then(function(r){return r.result})},do_delete_id_seq:function(r){return d().do_get(r,"0","delete-id").then(function(r){return r.result})},do_promise_query:function(r,e){if(!r)return Promise.reject(new Error(u+"parameter:query is required"));if(e&&!Array.isArray(e))return Promise.reject(new Error(u+"parameter:values should be array!"));var t={query:r,values:e};return d().do_get("#","0","query",t).then(function(r){return r.result})},do_save_node:function(r,e,t){return Promise.reject(new Error("404 NOT FOUND - NOT IMPLEMENTED!"))},do_save_node_hist:function(r,e,t){return Promise.reject(new Error("404 NOT FOUND - NOT IMPLEMENTED!"))},do_read_node:function(r,e){return Promise.reject(new Error("404 NOT FOUND - NOT IMPLEMENTED!"))},do_test_self:function(r){return r}});t(n,e);var o=r.env("MS_ENDPOINT"),i=require("./http-proxy"),d=function(){if(!o)throw new Error("env:MS_ENDPOINT is required!");var r="X"+n,e=t(r);return e||i(t,r,o)};r.is_dev;return e};