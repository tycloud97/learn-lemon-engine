"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};module.exports=function(r,e){e=e||"SS";var t=r.U,o=r._;if(!t)throw new Error("$U is required!");if(!o)throw new Error("$_ is required!");var y=r.log,a=(r.inf,r.err),m=t.NS(e,"magenta"),i={do_get:function(r,e,t,o,i){return void 0===r?Promise.reject(new Error(m+":host is required!")):n("GET",r,e,t,o,i)},do_post:function(r,e,t,o,i){return void 0===r?Promise.reject(new Error(m+":host is required!")):n("POST",r,e,t,o,i)},do_put:function(r,e,t,o,i){return void 0===r?Promise.reject(new Error(m+":host is required!")):n("PUT",r,e,t,o,i)},do_delete:function(r,e,t,o,i){return void 0===r?Promise.reject(new Error(m+":host is required!")):n("DELETE",r,e,t,o,i)}};r(e,i);var n=function(r,e,t,o,i,n){if(e=(e||"").toLowerCase(),!r)return Promise.reject(new Error(m+":METHOD is required!"));if(7<e.lastIndexOf("/"))return Promise.reject(new Error(m+":HOST is invalid. HOST:"+e));e.startsWith("http")||(e="http://"+e);var u=require("request"),s=require("query-string"),d=i&&"object"===(void 0===i?"undefined":_typeof(i))?s.stringify(i):""+i,f=e+(void 0===t?"":t)+(d?"?"+d:""),c={method:r,uri:f,body:n,json:"string"!=typeof n};return y(m," web :=",c.method,f),new Promise(function(n,s){u(c,function(r,e,t){if(r&&a(m,">>>>> requested! err=",r),r)return s(new Error(r));var o=e.statusCode,i=e.statusMessage;if(200!==o)return y(m,"> code="+o+", msg="+i+", body=",t),s({statusCode:o,statusMessage:i,body:t=t||i});n(t)})})};return i};