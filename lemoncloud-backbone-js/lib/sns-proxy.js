"use strict";module.exports=function(t,i){i=i||"SN";var r=t.U,e=t._;if(!r)throw new Error("$U is required!");if(!e)throw new Error("$_ is required!");var n=r.NS(i,"yellow"),s=t.log,u=(t.inf,t.err,{do_publish:function(r,e,t){if(!r)return Promise.reject("snsId is required!");if(!e)return Promise.reject("subject is required!");if(!t)return Promise.reject("payload is required!");var i=Object.assign({},{});return i.subject=e,d().do_post(r,"0",void 0,i,t).then(function(r){return r.result})},do_test_self:function(r){s(n,"do_test_self()... param=",r=r||{});var e=Object.assign({},r||{});return d().do_get("#","0","test-self",e).then(function(r){return r.result})}});t(i,u);var o=r.env("SN_ENDPOINT"),f=require("./http-proxy"),d=function(){if(!o)throw new Error("env:SN_ENDPOINT is required!");var r="X"+i,e=t(r);return e||f(t,r,o)};return u};